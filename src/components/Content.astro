---
import Map from './Map.tsx'

const response = await fetch('https://opensheet.elk.sh/1FdnFQvfoR_LbfJRt7dHK2DvtMVgSVMFA8S1mvzUIJWw/1');
const data = await response.json();

const formatedData = data
    .filter((item: any) => item['Latitude'] && item['Latitude'].length)
    .map((item: any) => {
        return {
            latlng: {
                lat: parseFloat(item['Latitude']?.split(',')[0]),
                lng: parseFloat(item['Latitude']?.split(',')[1]),
            },  
            date: item['Date'],
            ville: item['Ville'],
            type: item['Type rencontres'],
            lien: item['Liens externes'],
        }
    })
---

<section class='container'>
    <Map client:only="react" data={formatedData} />
</section>

<style>
    .container {
        background-color: red;
    }
</style>